<!-- Progress Plot Only -->
<div class="progress-stats">
    <h2 style="text-align: center; margin-bottom: 2rem;">C++20 modules for a brighter future – and your help!</h2>
    
    <p style="text-align: center; margin-bottom: 2rem; color: gray;">
        Faster compilation • Better encapsulation • No macro leakage • No include order issues
    </p>

    <div class="progress-container" style="width: 100%;">
        <div style="height: 400px">
            <canvas id="project-cumulative-chart"></canvas>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar-container">
        <div class="progress-bar-track">
            {{ $progressPercent := .Site.Data.progress.header.progress_percent }}
            <div class="progress-bar-fill" style="width: {{ $progressPercent }}%;"></div>
        </div>
        <p class="progress-bar-text">
            <strong>{{ .Site.Data.progress.header.completed_projects }}</strong> of <strong>{{ .Site.Data.progress.header.total_projects }}</strong> projects complete
            {{ with .Site.Data.progress.header.estimated_completion_date }}
                • Estimated completion: <strong>{{ dateFormat "2 January 2006" (time .) }}</strong>
            {{ end }}
        </p>
    </div>

    <style>
        .progress-bar-container {
            width: 100%;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        
        .progress-bar-track {
            width: 100%;
            height: 8px;
            background: rgba(128, 128, 128, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff9500, #ff5722);
            border-radius: 4px;
        }
        
        .progress-bar-text {
            margin-bottom: 0.5rem;
            margin-top: 0.75rem;
            font-size: 1.1rem;
            color: gray;
            text-align: center;
        }
    </style>
    
    <!-- Display Header Information -->
    <div style="margin-bottom: 1rem; margin-top: 1rem; font-size: x-small; color: gray; text-align: center;">
        <p>Popularity based on vcpkg port updates: Generated Date: {{ dateFormat "2 January 2006" (time .Site.Data.progress.header.generated_date) }} Count parsed from <a href="https://github.com/microsoft/vcpkg/commit/{{ .Site.Data.progress.header.vcpkg_commit_hash }}">this git commit.</a> <a href="/excluded-c-libraries/">{{ len .Site.Data.excluded_c_libraries.libraries }} C libraries excluded.</a> Website last rebuilt: {{ now.Format "2 January 2006" }}
        </p>
    </div>
    
    <script src="/js/chart.js"></script>
    <script src="/js/luxon.min.js"></script>
    <script src="/js/chartjs-adapter-luxon.min.js"></script>
    <script src="/js/historical_plot.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            plotHistoricalData();
            
            // Listen for theme changes
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', function() {
                    // Small delay to allow the theme change to complete
                    setTimeout(updateChartTheme, 50);
                });
            }
        });
    </script>
</div>
